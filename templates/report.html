<!DOCTYPE html>
<html>
<head>
    <title>Domain Report</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .domain { margin-bottom: 40px; }
        .item { margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #dddddd; text-align: left; padding: 8px; vertical-align: top; }
        th { background-color: #f2f2f2; }
        .distribution { margin-top: 10px; }
        .cohort-tabs { position: sticky; top: 0; background-color: white; z-index: 1000; display: flex; margin-bottom: 10px; }
        .cohort-tab { padding: 10px; cursor: pointer; border: 1px solid #ccc; background-color: #f1f1f1; }
        .cohort-tab.active { background-color: #ccc; }
        .cohort-content { display: none; }
        .cohort-content.active { display: block; }
        .graph-container { width: 100%; }
        .graph-container svg { width: 100%; height: auto; }
    </style>
    <script>
        function showCohort(cohortName, element) {
            var contents = document.getElementsByClassName('cohort-content');
            for (var i = 0; i < contents.length; i++) {
                contents[i].classList.remove('active');
            }
            
            var tabs = document.getElementsByClassName('cohort-tab');
            for (var i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove('active');
            }
            
            var cohortContents = document.getElementsByClassName(cohortName + '-distribution');
            for (var i = 0; i < cohortContents.length; i++) {
                cohortContents[i].classList.add('active');
            }
            element.classList.add('active');
        }

        window.onload = function() {
            var firstTab = document.querySelector('.cohort-tab');
            if(firstTab){
                firstTab.click();
            }
        }
    </script>
</head>
<body>
    <h1>Domain Report</h1>
    <div class="cohort-tabs">
        <div class="cohort-tab active" onclick="showCohort('combined', this)">Combined</div>
        <div class="cohort-tab" onclick="showCohort('by-cohort', this)">By Cohort</div>
    </div>
    {% for entry in summary %}
    <div class="domain">
        <h2>{{ entry.domain }}</h2>
        <div class="item">
            <h3>{{ entry.item }}</h3>
            {% with distributions_all=entry.distributions_all, distributions=entry.distributions_by_cohort %}
                {% include 'templates/cohort_table.html' %}
            {% endwith %}
        </div>
    </div>
    {% endfor %}
</body>
</html>
